<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oceans | Feed</title>
    <link rel="stylesheet" href="styles/feed.css">
</head>
<body>
    <nav>
        <div class="fotos">
            <a href="perfil.html">
                <img src="assets/icon/addHistoria.png">
            </a>

            <a href="cadMusica.html">
                <img src="assets/icon/perfil.png">
            </a>
        </div>

        <div class="pesquisa">
            <div>
                <input type="text" placeholder=" Ex: Travis">
                <img src="assets/icon/pesquisar-lupa.png">
            </div>

            <select id="input_selecao">
                <option selected >Artista</option>
                <option>Usuário</option>
            </select>
        </div>

        <a href="">
            <img src="assets/icon/favicon.png" class="icone">
        </a>
    </nav>

    <div class="titulo">
        <h1>Feed de atividades: </h1>

        <div>
            <h1>Filtros:</h1>
            <select id="" onchange="filtrar()">
                <option selected disabled value="#">Sentimento</option>
                <option>Felicidade</option>
                <option>Tristeza</option>
            </select>
        </div>
    </div>


    <div class="list_post">

        

    </div>

</body>
</html>

<!-- <body onload="postagensGerais()">
    <a href="perfil.html">Perfil</a>

    <br><br>

    Feed:   

    <br><br>

    <input type="text" placeholder="Pesquise um artista..." id="input_artista" >
    <button onclick="carregar_artista()">Pesquisar artista</button>
    <br><br>
    <div id="div_postagem_geral">

    </div>
    <br><br>
    <button onclick="aumentar_limite()" id="button_Ver_Mais">Ver mais</button>
</body> -->

<script>

var limite_post = 1;
var tamanho_post = 0;
function aumentar_limite(){
    if(limite_post <= tamanho_post){
        limite_post += 2;
        postagensGerais();
    }else{
        button_Ver_Mais.style.display = 'none';
    }
}





async function postagensGerais() {
        
        var mensagem = "";
        const resp = await fetch(`/interaction/postagens_gerais/`);

        if (resp.ok) {

            const postagens_gerais = await resp.json();
            tamanho_post =postagens_gerais.length;
            
            console.log(postagens_gerais);

            for(i = 0 ; i <= limite_post; i++){
                mensagem += `
                    <h4>${postagens_gerais[i].Nome} - ${postagens_gerais[i].Data}</h4>
                    <h5>${postagens_gerais[i].Musica} - ${postagens_gerais[i].Sentimento}</h5>
                    <p>${postagens_gerais[i].Historia}</p>
                    <img src= "${postagens_gerais[i].Foto}" width = "60px"
                    <br>
                     <audio id="audioPreview"  controls>
                     <source src="${postagens_gerais[i].Preview}" type="audio/mpeg">
                    Seu navegador não suporta o elemento de áudio.</audio>
                 
                    <br>
                    <br>
                    <br>
                    <br>
                `;
            };

            div_postagem_geral.innerHTML = mensagem;

        }else{
            console.log('Erro ao achar as postagens!');
        }


    }
    

async function carregar_artista() {
    sessionStorage.Dado_Artista = input_artista.value;
    window.location = "./artista.html"; 
}

</script>